<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Member Vault</title>
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }

        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <h1>Member Vault</h1>
    <div id="memberVaultData"></div>

    <script>
        async function fetchMemberVault() {
            const response = await fetch('/api/member-vault');
            const memberVaultData = await response.json();
            const container = document.getElementById('memberVaultData');

            for (const characterId in memberVaultData) {
                const characterItems = memberVaultData[characterId];

                const characterTitle = document.createElement('h2');
                characterTitle.textContent = 'Character ID: ' + characterId;
                container.appendChild(characterTitle);

                const table = document.createElement('table');

                const headerRow = document.createElement('tr');
                const headers = ['Item Name', 'Image', 'Bucket Name'];
                for (const headerText of headers) {
                    const th = document.createElement('th');
                    th.textContent = headerText;
                    headerRow.appendChild(th);
                }
                table.appendChild(headerRow);

                for (const item of characterItems) {
                    const row = document.createElement('tr');

                    const itemName = document.createElement('td');
                    itemName.textContent = item.itemName;
                    row.appendChild(itemName);

                    const itemImage = document.createElement('td');
                    const img = document.createElement('img');
                    img.src = 'https://www.bungie.net/' + item.itemImage;
                    img.alt = 'Item image';
                    img.width = 100;
                    itemImage.appendChild(img);
                    row.appendChild(itemImage);

                    const bucketName = document.createElement('td');
                    bucketName.textContent = item.bucketName;
                    row.appendChild(bucketName);

                    table.appendChild(row);
                }

                container.appendChild(table);
            }
        }

        fetchMemberVault();
    </script>
</body>
</html>